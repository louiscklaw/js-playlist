<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div>
    <h3>Simple requests</h3>
    <div class="hello_simple_requests"></div>
  </div>

  <div>
    <h3>preflighted requests</h3>
    <div class="hello_preflighted_requests"></div>
  </div>


  <script>
    const testSimpleRequests = () => {
      const handleOnReadyStateChange = () => {
        console.log( 'handle on ready state change' )
      }

      const xhr = new XMLHttpRequest();
      const url = 'https://httpbin.org/get';

      xhr.open( 'GET', url );
      xhr.onreadystatechange = handleOnReadyStateChange;
      xhr.send();

    }

    const testPreflightedRequests = () => {
      const handleOnReadyStateChange = () => {
        console.log( 'handle on ready state change' )
      }

      const xhr = new XMLHttpRequest();
      xhr.open( 'POST', 'https://httpbin.org/post' );
      xhr.setRequestHeader( 'X-PINGOTHER', 'pingpong' );
      xhr.setRequestHeader( 'Content-Type', 'application/xml' );
      xhr.onreadystatechange = handleOnReadyStateChange;
      xhr.send( '<person><name>Arun</name></person>' );
    }


    document.addEventListener( "DOMContentLoaded", function () {
      testSimpleRequests()
      testPreflightedRequests()
    } );
  </script>

</body>

</html>