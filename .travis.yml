# https://docs.travis-ci.com/user/docker/
# https://docs.travis-ci.com/user/environment-variables/
# https://docs.travis-ci.com/user/job-lifecycle/

# You can import up to 25 other configs in total.
os: linux

language: node_js

node_js:
  - 10
cache:
  - npm
  - pip

script:
  - echo "helloworld"

jobs:
  include:
    - stage: Merge
      name: merge (travis-build-merger)
      if: branch != master
      script:
        - mkdir -p tmp
        - cd tmp
        -   wget https://raw.githubusercontent.com/louiscklaw/travis-playlist/master/travis-build-merger/_util/merge.py .
        -   wget https://raw.githubusercontent.com/louiscklaw/travis-playlist/master/travis-build-merger/_util/Pipfile .
        -   wget https://raw.githubusercontent.com/louiscklaw/travis-playlist/master/travis-build-merger/_util/Pipfile.lock .
        -   chmod +x merge.py
        -   sudo apt update
        -   sudo apt install -y python3 python3-pip python3-dev python3-wheel python3-setuptools
        # pip3 install --user pipenv
        -  python3 -m pip install pipenv
        -  pipenv sync
        -  pipenv run python3 ./merge.py
        - cd -


stages:
  - Unit_test
  - Test
  - Build
  - Deploy
  - Integration_to_other_repo
  - Publish_dashboard
  - Merge

import:
  - credentials.yml
  - concurrently-tryout/.travis.yml